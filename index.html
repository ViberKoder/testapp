<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Hatch - Egg Hatching</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script src="/api/config.js"></script>
</head>
<body>
    <div class="background-container">
        <div class="background-image"></div>
    </div>
    
    <div class="app-container">
        <!-- Profile Avatar Button (Top Left - Only on Home) -->
        <button class="profile-avatar-button" id="profile-avatar-btn" data-page="profile-page">
            <div class="profile-avatar-small-container">
                <div id="profile-avatar-small-icon" class="profile-avatar-small-animation"></div>
            </div>
        </button>
        
        <!-- Home Page (Notcoin Tap Style) -->
        <div class="page active" id="home-page">
            <!-- Points Counter (Top Left) -->
            <div class="points-counter-container">
                <div class="points-counter" id="points-counter">0</div>
            </div>
            
            <!-- Top Users Section -->
            <div class="top-users-container" id="top-users-container">
                <div class="top-users-tabs">
                    <button class="top-users-tab active" data-tab="points">Points</button>
                    <button class="top-users-tab" data-tab="sent">Sent</button>
                    <button class="top-users-tab" data-tab="hatched">Hatched</button>
                </div>
                <div class="top-users-list" id="top-users-list">
                    <div class="loading">Loading...</div>
                </div>
            </div>
            
            <!-- Available Eggs Counter (Top Right) -->
            <div class="eggs-available-container">
                <div class="eggs-available-icon">
                    <img src="https://em-content.zobj.net/source/apple/419/egg_1f95a.png" alt="Egg" class="egg-emoji-icon">
                </div>
                <div class="eggs-available-counter">
                    <div class="eggs-available-value" id="eggs-available-value">0</div>
                    <div class="eggs-available-max" id="eggs-available-max">/100</div>
                </div>
            </div>
            
            <!-- Main Egg (Center) -->
            <div class="egg-container" id="egg-tap-container">
                <div id="egg-animation" class="egg-image"></div>
            </div>
        </div>

        <!-- More Egg Page -->
        <div class="page" id="more-page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">More Eggs</h2>
                </div>

                <!-- Tasks Sections -->
                <div class="tasks-sections">
                    <!-- Social Tasks -->
                    <div class="task-section">
                        <h3 class="task-section-title">Social</h3>
                        <div class="task-card" id="subscribe-task">
                            <div class="task-icon-small">
                                <div id="more-icon" class="task-icon-animation"></div>
                            </div>
                            <div class="task-info-compact">
                                <div class="task-name-compact">Subscribe to Hatch Egg</div>
                                <div class="task-reward-compact">+20 Eggs</div>
                            </div>
                            <button class="task-button-compact" id="subscribe-btn">Complete</button>
                        </div>
                    </div>
                    
                    <!-- Daily Tasks -->
                    <div class="task-section">
                        <h3 class="task-section-title">Daily</h3>
                        <div class="task-card-placeholder">
                            <div class="task-placeholder-text">More tasks coming soon...</div>
                        </div>
                    </div>
                    
                    <!-- Referral Info -->
                    <div class="task-section">
                        <h3 class="task-section-title">Referral</h3>
                        <div class="info-card">
                            <p>Каждое яйцо пользователя уже реферальное. Никаких ссылок не нужно - просто отправляйте яйца через @tohatchbot, и они автоматически будут считаться реферальными!</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Egg Network Page (Explorer) -->
        <div class="page" id="explorer-page">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Explore <span class="highlight">Egg Network</span></h2>
                </div>

                <div class="explorer-container">
                    <!-- Search Section -->
                    <div class="explorer-search-section">
                        <div class="search-box-explorer">
                            <input 
                                type="text" 
                                id="explorer-egg-id-input" 
                                placeholder="Search egg ID, @username or address..."
                                class="search-input-explorer"
                            />
                            <button id="explorer-search-btn" class="search-btn-explorer">Search</button>
                        </div>
                        <div id="explorer-search-result" class="explorer-result"></div>
                    </div>

                    <!-- User Eggs History (shown when viewing user profile) -->
                    <div id="user-eggs-history-container" class="explorer-eggs-list" style="display: none;">
                    </div>
                    
                    <!-- My Eggs Section (at bottom, like ads on tonscan) -->
                    <div class="explorer-my-eggs-section" id="my-eggs-section" style="display: none;">
                        <h3 class="section-title">My Eggs</h3>
                        <div id="explorer-my-eggs-list" class="explorer-eggs-list">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div class="page" id="profile-page">
            <div class="page-content">
                <div class="profile-header">
                    <div class="profile-avatar-container">
                        <div id="profile-icon" class="profile-icon-animation"></div>
                    </div>
                    <div class="profile-info">
                        <div class="profile-name" id="profile-name">User</div>
                        <div class="profile-id" id="profile-id">ID: -</div>
                    </div>
                </div>

                <!-- Eggs Balance Section -->
                <div class="eggs-balance-section">
                    <div class="stat-card">
                        <div class="stat-label">Available Eggs</div>
                        <div class="stat-value" id="eggs-balance">0</div>
                    </div>
                </div>

                <!-- How it works Section -->
                <div class="how-it-works-section">
                    <h3 class="section-title">How it works</h3>
                    <div class="info-card">
                        <p>Send eggs through @tohatchbot in any chat. Only recipients can hatch your eggs!</p>
                        <div class="points-info">
                            <div class="point-item">
                                <span class="point-icon">+2</span>
                                <span class="point-text">Hatch when someone hatches your egg</span>
                            </div>
                            <div class="point-item">
                                <span class="point-icon">+1</span>
                                <span class="point-text">Hatch when you hatch someone's egg</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="home-page">
                <div class="nav-icon-container">
                    <div id="nav-home-icon" class="nav-icon-animation"></div>
                </div>
                <span class="nav-label">Home</span>
            </button>
            <button class="nav-item" data-page="more-page">
                <div class="nav-icon-container">
                    <div id="nav-more-icon" class="nav-icon-animation"></div>
                </div>
                <span class="nav-label">More</span>
            </button>
            <button class="nav-item" data-page="explorer-page">
                <div class="nav-icon-container">
                    <div id="nav-explorer-icon" class="nav-icon-animation"></div>
                </div>
                <span class="nav-label">Network</span>
            </button>
        </nav>
    </div>

    <script src="app.js"></script>
</body>
</html>
